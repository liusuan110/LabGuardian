# 运算放大器 (Op-Amp) 基础知识

## 什么是运算放大器
运算放大器 (Operational Amplifier, 简称运放/Op-Amp) 是一种高增益、差分输入的集成电路放大器。它是模拟电路中最基本、最重要的有源器件之一。

## 理想运放特性
- **开环增益**: 无穷大 (A_OL → ∞)
- **输入阻抗**: 无穷大 (Z_in → ∞, 输入端不取电流)
- **输出阻抗**: 零 (Z_out = 0, 理想电压源输出)
- **带宽**: 无穷大
- **共模抑制比 (CMRR)**: 无穷大
- **无输入失调电压**: V_OS = 0

实际运放接近但不等于理想特性, 分析时通常用"虚短"和"虚断"简化。

## 两个重要分析法则

### 虚短 (Virtual Short)
在负反馈电路中, 同相输入端(V+)和反相输入端(V-)的电压近似相等:
V+ ≈ V-

### 虚断 (Virtual Open)
由于输入阻抗极高, 流入两个输入端的电流近似为零:
I+ ≈ 0, I- ≈ 0

使用"虚短"+"虚断"可以快速分析绝大多数运放电路。

## 常见运放型号

### LM741 / UA741
- 经典通用运放, 教学最常用
- 单运放, DIP-8 封装
- 供电: ±5V ~ ±18V (典型 ±12V 或 ±15V)
- GBW (增益带宽积): 1 MHz
- 输入失调电压: 典型 1-5 mV
- 转换速率 (Slew Rate): 0.5 V/μs
- 注意: 输出不能摆到电源轨 (不是 Rail-to-Rail)

引脚定义 (DIP-8, 顶视图):
```
       ┌──U──┐
  NC  ─┤1   8├─ NC
  V-  ─┤2   7├─ V+
  V+  ─┤3   6├─ Vout
  VEE ─┤4   5├─ VCC
       └─────┘
```
- Pin 2: 反相输入 (-)
- Pin 3: 同相输入 (+)
- Pin 4: 负电源 (VEE, 如 -12V)
- Pin 6: 输出
- Pin 7: 正电源 (VCC, 如 +12V)

### LM358
- 双运放 (内含 2 个运放), DIP-8 封装
- 单电源工作: 3V ~ 32V (也可双电源 ±1.5V ~ ±16V)
- 输入可到地电位 (Ground-Sense)
- GBW: 1 MHz
- 非常适合单电源供电的电路
- 比 711 更方便, 教学和实验常用

### NE5532
- 双运放, 低噪声
- 音频领域经典型号
- GBW: 10 MHz
- 转换速率: 9 V/μs
- 适合音频前置放大器、有源滤波器

### TL072 / TL074
- JFET 输入运放
- 极高输入阻抗 (10^12 Ω)
- 适合高阻抗信号源
- TL072: 双运放; TL074: 四运放

## 基本电路配置

### 1. 反相放大器
```
        R_f
  ──┤├──┬──┤├──
        │      Vout
  Vin ──┤├──┤- 
   R_1   │  │ Op-Amp
         │  │+
        GND ┘
```
- 增益: A_v = -R_f / R_1
- 输入阻抗: R_1
- 反相: 输出与输入相位相反 (180°)
- 示例: R_1=1kΩ, R_f=10kΩ → A_v = -10 (放大10倍, 反相)

### 2. 同相放大器
```
  Vin ──┤+ 
        │  Op-Amp ── Vout
  GND ──┤├──┤-
   R_1   │
         ├──┤├── GND
              R_f
```
- 增益: A_v = 1 + R_f / R_1
- 输入阻抗: 极高 (运放输入阻抗)
- 同相: 输出与输入同相
- 示例: R_1=1kΩ, R_f=9kΩ → A_v = 10

### 3. 电压跟随器 (缓冲器)
- 同相放大器的特殊情况: R_f=0, R_1=∞
- A_v = 1 (增益为1, 不放大)
- 作用: 阻抗变换 (高输入阻抗 → 低输出阻抗)
- 常用于传感器信号的缓冲

### 4. 差分放大器
- A_v = R_f / R_1 × (V2 - V1)
- 放大两个输入之间的差值
- 可以抑制共模干扰
- 注意四个电阻的精度匹配

### 5. 加法器 (反相)
- Vout = -R_f × (V1/R1 + V2/R2 + V3/R3)
- 实现多个信号的加权求和
- 音频混合器就是典型应用

### 6. 积分器
- 用电容替代反馈电阻: Vout = -(1/RC) ∫ Vin dt
- 实际使用时需并联大电阻防直流漂移
- 应用: 波形变换 (方波→三角波)

### 7. 微分器
- 用电容替代输入电阻: Vout = -RC × dVin/dt
- 对高频噪声敏感, 实际需串联小电阻
- 应用: 波形变换 (三角波→方波), 边沿检测

## 运放供电注意事项

### 双电源供电 (±VCC)
- 典型: ±12V 或 ±15V
- 输出可在 正负电压之间摆动
- 适合交流信号放大
- VCC 接 Pin 7 (正), VEE 接 Pin 4 (负)

### 单电源供电
- 使用 LM358 等支持单电源的运放
- 需要设置"虚拟地" (通常 VCC/2)
- 输入信号需要直流偏置到 VCC/2 附近
- 输出只能在 0 ~ VCC 之间摆动

### 面包板上的供电技巧
1. 正负电源轨: 面包板上下两条电源轨分别接 +VCC 和 -VEE (或 GND)
2. 电源去耦: 每个运放就近放置 0.1μF 陶瓷电容 (VCC-GND)
3. 单电源分压: 用两个等值电阻 (如 10kΩ) 从 VCC 分出 VCC/2, 再用电压跟随器缓冲

## 常见实验问题排查
- **输出始终饱和 (接近正/负电源)**: 检查是否有负反馈? 是否输入偏置正确?
- **输出为 0V**: 检查供电电源是否正常? Pin 4/7 是否接反?
- **波形失真 (削顶/削底)**: 输出超出电压摆幅, 减小增益或增大供电电压
- **振荡自激**: 反相/同相输入接反了? 缺少去耦电容?
- **输出有直流偏移**: 输入失调电压导致, 可在反相端串联补偿电阻
